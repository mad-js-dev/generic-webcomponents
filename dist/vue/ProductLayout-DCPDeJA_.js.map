{"version":3,"file":"ProductLayout-DCPDeJA_.js","sources":["../../src/components/templates/product-layout/ProductLayout.js"],"sourcesContent":["/**\n * ProductLayout\n * A layout component that displays an image collection, title, and content\n */\nimport { ImageCollection } from '../../organisms/image-collection/ImageCollection.js';\n\n// Import sample images\nconst defaultImages = [\n  {\n    title: 'Nature',\n    src: 'images/samples/nature.jpg',\n    alt: 'Scenic nature landscape',\n    description: 'A beautiful landscape showcasing nature\\'s beauty.'\n  },\n  {\n    title: 'Architecture',\n    src: 'images/samples/architecture.jpg',\n    alt: 'Modern architecture building',\n    description: 'Stunning modern architecture design.'\n  },\n  {\n    title: 'Technology',\n    src: 'images/samples/technology.jpg',\n    alt: 'Technology circuit board',\n    description: 'Close-up of an advanced circuit board.'\n  }\n];\n\nexport class ProductLayout extends HTMLElement {\n  static get observedAttributes() {\n    return ['title', 'images'];\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._title = 'Product Name';\n    this._images = [];\n    this._isConnected = false;\n    this._hasRendered = false;\n    this._isUpdating = false;\n    this._elements = null;\n    this._render = this._render.bind(this);\n  }\n\n  connectedCallback() {\n    this._isConnected = true;\n    this._render();\n  }\n\n  disconnectedCallback() {\n    this._isConnected = false;\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n    \n    if (name === 'title') {\n      this._title = newValue || 'Product Name';\n      this._updateTitle();\n    } else if (name === 'images') {\n      if (typeof newValue === 'string') {\n        try {\n          const parsed = JSON.parse(newValue);\n          this.images = Array.isArray(parsed) ? parsed : [];\n        } catch (e) {\n          console.error('Invalid images JSON:', e);\n          this.images = [];\n        }\n      } else if (Array.isArray(newValue)) {\n        this.images = newValue;\n      } else {\n        this.images = [];\n      }\n    }\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  set title(value) {\n    if (this._title === value) return;\n    this._title = value || '';\n    this._updateTitle();\n  }\n\n  get images() {\n    return this._images;\n  }\n\n  set images(value) {\n    if (Array.isArray(value)) {\n      this._images = value.length > 0 ? value : [...defaultImages];\n    } else if (typeof value === 'string') {\n      try {\n        const parsed = JSON.parse(value);\n        this._images = Array.isArray(parsed) ? parsed : [...defaultImages];\n      } catch (e) {\n        console.error('Invalid images JSON:', e);\n        this._images = [...defaultImages];\n      }\n    } else {\n      this._images = [...defaultImages];\n    }\n    this._updateImages();\n  }\n\n  _updateTitle() {\n    if (!this._elements?.title) return;\n    this._elements.title.textContent = this._title;\n  }\n\n  _updateImages() {\n    if (!this._elements?.imageCollection) return;\n    // Ensure we're passing a fresh copy of the array to trigger the setter\n    this._elements.imageCollection.images = [...this._images];\n    \n    // Ensure the ImageCollection is visible\n    if (this._elements.imageCollectionContainer) {\n      this._elements.imageCollectionContainer.style.display = 'block';\n    }\n  }\n\n  _render() {\n    if (this._isUpdating || !this.shadowRoot) return;\n    this._isUpdating = true;\n\n    try {\n      if (!this._hasRendered) {\n        this.shadowRoot.innerHTML = `\n          <style>\n            :host {\n              display: block;\n              max-width: 1200px;\n              margin: 0 auto;\n              padding: 2rem;\n              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n            }\n            \n            .product-layout {\n              display: grid;\n              grid-template-columns: 1fr;\n              gap: 2rem;\n            }\n            \n            .product-header {\n              text-align: center;\n              margin-bottom: 2rem;\n            }\n            \n            .product-title {\n              font-size: 2.5rem;\n              color: #2d3748;\n              margin: 0 0 1rem;\n            }\n            \n            .content {\n              line-height: 1.6;\n              color: #4a5568;\n            }\n            \n            .image-collection-container {\n              margin: 2rem 0;\n            }\n            \n            /* Remove padding from collapsible items */\n            image-collection::part(content) {\n              padding: 0;\n            }\n            \n            @media (min-width: 1024px) {\n              .product-layout {\n                grid-template-columns: 1fr 1fr;\n                align-items: start;\n              }\n            }\n          </style>\n          <div class=\"product-layout\">\n            <div class=\"product-content\">\n              <div class=\"product-header\">\n                <h1 class=\"product-title\" id=\"title\"></h1>\n              </div>\n              <div class=\"content\" id=\"content\">\n                <slot></slot>\n              </div>\n            </div>\n            <div class=\"image-collection-container\" id=\"imageCollectionContainer\" style=\"display: none;\">\n              <image-collection id=\"imageCollection\"></image-collection>\n            </div>\n          </div>\n        `;\n\n        this._elements = {\n          title: this.shadowRoot.getElementById('title'),\n          content: this.shadowRoot.getElementById('content'),\n          imageCollection: this.shadowRoot.getElementById('imageCollection'),\n          imageCollectionContainer: this.shadowRoot.getElementById('imageCollectionContainer')\n        };\n        \n        // Initialize with default images if none provided\n        if (this._images.length === 0) {\n          this._images = [...defaultImages];\n        }\n\n        this._hasRendered = true;\n      }\n\n      this._updateTitle();\n      this._updateImages();\n    } finally {\n      this._isUpdating = false;\n    }\n  }\n}\n\n// Auto-register the component when loaded directly\nif (typeof window !== 'undefined' && !customElements.get('product-layout')) {\n  customElements.define('product-layout', ProductLayout);\n}\n"],"names":["defaultImages","ProductLayout","name","oldValue","newValue","parsed","e","value","_a"],"mappings":"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"}