{"version":3,"file":"react.umd.js","sources":["../src/components/molecules/collapsible-list/CollapsibleList.js","../src/components/atoms/icon-label/IconLabel.js","../src/components/molecules/collapsible-item/CollapsibleItem.js","../src/components/index.js","../src/wrappers/react/index.jsx","../src/components/organisms/selection-menu/SelectionMenu.js","../src/components/organisms/image-collection/ImageCollection.js","../src/components/templates/product-layout/ProductLayout.js"],"sourcesContent":["/**\r\n * CollapsibleList Component\r\n * A custom element that creates a collapsible list container\r\n */\r\n\r\nexport class CollapsibleList extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return ['reverse-heading', 'single-item', 'accordion'];\r\n  }\r\n  \r\n  constructor() {\r\n    super();\r\n    this.attachShadow({ mode: 'open' });\r\n    this._isUpdating = false; // Track if we're currently updating to prevent reentrant calls\r\n    this._handleItemToggle = this._handleItemToggle.bind(this);\r\n    \r\n    const container = document.createElement('div');\r\n    const slot = document.createElement('slot');\r\n    \r\n    // Create styles for the component\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      :host {\r\n        display: block;\r\n        width: 100%;\r\n        --indent-size: 1.5rem;\r\n      }\r\n      \r\n      ::slotted(collapsible-item) {\r\n        display: block;\r\n        margin: 0.25rem 0;\r\n        padding: 0;\r\n        width: 100%;\r\n      }\r\n      \r\n      /* Nested lists should have a border */\r\n      ::slotted(collapsible-list) {\r\n        border-left: 1px solid #e0e0e0;\r\n        margin-left: 0.5rem;\r\n        padding-left: 0.5rem;\r\n      }\r\n      \r\n      /* Style for the header in collapsible items */\r\n      .collapsible-item__header {\r\n        display: flex;\r\n        align-items: center;\r\n        width: 100%;\r\n        flex-direction: row;\r\n      }\r\n      \r\n      /* Toggle container styles */\r\n      .collapsible-item__toggle-container {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        width: var(--toggle-size, 24px);\r\n        height: var(--toggle-size, 24px);\r\n        margin: var(--toggle-margin, 0 8px 0 0);\r\n        flex-shrink: 0;\r\n      }`;\r\n    \r\n    container.appendChild(slot);\r\n    this.shadowRoot.append(style, container);\r\n  }\r\n  \r\n  async connectedCallback() {\r\n    if (!this._initialized) {\r\n      this._initializeComponent();\r\n      this._initialized = true;\r\n      \r\n      // Set initial reverse heading state\r\n      await this._updateReverseHeading();\r\n      \r\n      // Set up event listeners for accordion behavior\r\n      this.addEventListener('toggle', this._handleItemToggle);\r\n      \r\n      // Ensure at least one item is expanded in accordion mode\r\n      if (this.hasAttribute('accordion')) {\r\n        this._ensureOneItemExpanded();\r\n      }\r\n    }\r\n    \r\n    // Set up mutation observer for dynamic content\r\n    this._setupMutationObserver();\r\n  }\r\n  \r\n  _initializeComponent() {\r\n    if (!this.hasAttribute('role')) {\r\n      this.setAttribute('role', 'list');\r\n    }\r\n    \r\n    if (!this.hasAttribute('aria-label') && !this.hasAttribute('aria-labelledby')) {\r\n      console.warn('collapsible-list: Add an aria-label or aria-labelledby attribute for accessibility');\r\n    }\r\n  }\r\n  \r\n  _setupMutationObserver() {\r\n    // Set up a mutation observer to handle dynamically added items and attribute changes\r\n    this._observer = new MutationObserver(async (mutations) => {\r\n      let shouldUpdate = false;\r\n      \r\n      for (const mutation of mutations) {\r\n        if (mutation.type === 'attributes' && mutation.attributeName === 'reverse-heading') {\r\n          shouldUpdate = true;\r\n          break;\r\n        } else if (mutation.type === 'childList') {\r\n          // Check if any added nodes are collapsible items or lists\r\n          for (const node of mutation.addedNodes) {\r\n            if (node.nodeType === Node.ELEMENT_NODE && \r\n                (node.matches('collapsible-item') || node.matches('collapsible-list'))) {\r\n              shouldUpdate = true;\r\n              break;\r\n            }\r\n          }\r\n          if (shouldUpdate) break;\r\n        }\r\n      }\r\n      \r\n      if (shouldUpdate) {\r\n        await this._updateReverseHeading();\r\n      }\r\n    });\r\n    \r\n    // Start observing the component for attribute changes and child list changes\r\n    this._observer.observe(this, {\r\n      attributes: true,\r\n      attributeFilter: ['reverse-heading'],\r\n      childList: true,\r\n      subtree: true\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * Updates the reverse heading state for all child collapsible items\r\n   * @private\r\n   */\r\n  async _updateReverseHeading() {\r\n    // Prevent reentrant calls\r\n    if (this._isUpdating) return;\r\n    this._isUpdating = true;\r\n    \r\n    try {\r\n      const isReversed = this.hasAttribute('reverse-heading') && \r\n                       this.getAttribute('reverse-heading') !== 'false';\r\n      \r\n      // Temporarily disconnect observer to prevent infinite loop\r\n      if (this._observer) {\r\n        this._observer.disconnect();\r\n      }\r\n      \r\n      // Process direct child collapsible-items\r\n      const processItems = async (items) => {\r\n        for (const item of items) {\r\n          // Set the attribute on the item\r\n          if (isReversed) {\r\n            item.setAttribute('reverse-heading', '');\r\n          } else {\r\n            item.removeAttribute('reverse-heading');\r\n          }\r\n          \r\n          // Process any nested items in this item (only direct children)\r\n          const nestedItems = item.querySelectorAll(':scope > collapsible-item');\r\n          if (nestedItems.length > 0) {\r\n            await processItems(Array.from(nestedItems));\r\n          }\r\n          \r\n          // Process any nested lists in this item (only direct children)\r\n          const nestedLists = item.querySelectorAll(':scope > collapsible-list');\r\n          if (nestedLists.length > 0) {\r\n            await processLists(Array.from(nestedLists));\r\n          }\r\n        }\r\n      };\r\n      \r\n      // Process nested collapsible-lists\r\n      const processLists = async (lists) => {\r\n        for (const list of lists) {\r\n          // Skip if this is the current list to prevent cycles\r\n          if (list === this) continue;\r\n          \r\n          // Set the attribute on the list\r\n          if (isReversed) {\r\n            list.setAttribute('reverse-heading', '');\r\n          } else {\r\n            list.removeAttribute('reverse-heading');\r\n          }\r\n          \r\n          // Process any direct child items in this list\r\n          const nestedItems = list.querySelectorAll(':scope > collapsible-item');\r\n          if (nestedItems.length > 0) {\r\n            await processItems(Array.from(nestedItems));\r\n          }\r\n          \r\n          // Process any direct child lists\r\n          const nestedLists = list.querySelectorAll(':scope > collapsible-list');\r\n          if (nestedLists.length > 0) {\r\n            await processLists(Array.from(nestedLists));\r\n          }\r\n        }\r\n      };\r\n      \r\n      // Start processing from the current element\r\n      const items = this.querySelectorAll(':scope > collapsible-item');\r\n      if (items.length > 0) {\r\n        await processItems(Array.from(items));\r\n      }\r\n      \r\n      const lists = this.querySelectorAll(':scope > collapsible-list');\r\n      if (lists.length > 0) {\r\n        await processLists(Array.from(lists));\r\n      }\r\n      \r\n      // Force a reflow to ensure all attribute changes are applied\r\n      if (this.shadowRoot) {\r\n        this.shadowRoot.offsetHeight; // This forces a reflow\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating reverse heading:', error);\r\n    } finally {\r\n      // Reconnect observer if it exists\r\n      if (this._observer) {\r\n        this._observer.observe(this, {\r\n          attributes: true,\r\n          attributeFilter: ['reverse-heading'],\r\n          childList: true,\r\n          subtree: true\r\n        });\r\n      }\r\n      this._isUpdating = false;\r\n    }\r\n  }\r\n\r\n  _handleItemToggle(e) {\r\n    if (this._isUpdating) return;\r\n    \r\n    const target = e.target;\r\n    \r\n    // Only process if this is a direct child\r\n    if (target.parentElement === this) {\r\n      this._isUpdating = true;\r\n      \r\n      if (this.hasAttribute('accordion')) {\r\n        // In accordion mode, close other items when one is opened\r\n        if (target.expanded) {\r\n          this._closeOtherItems(target);\r\n        }\r\n      } else if (this.hasAttribute('single-item')) {\r\n        // In single-item mode, just close other items when one is opened\r\n        if (target.expanded) {\r\n          this._closeOtherItems(target);\r\n        }\r\n      }\r\n      \r\n      this._isUpdating = false;\r\n    }\r\n  }\r\n  \r\n  _closeOtherItems(exceptItem) {\r\n    // Don't close items if inside an image-collection\r\n    if (this.closest('image-collection')) {\r\n      return;\r\n    }\r\n    \r\n    const items = this.querySelectorAll('collapsible-item');\r\n    items.forEach(item => {\r\n      if (item !== exceptItem) {\r\n        item.expanded = false;\r\n      }\r\n    });\r\n  }\r\n  \r\n  _getOpenItems() {\r\n    return Array.from(this.querySelectorAll('collapsible-item[expanded]'));\r\n  }\r\n  \r\n  _ensureOneItemExpanded() {\r\n    if (!this.hasAttribute('accordion')) return;\r\n    \r\n    const openItems = this._getOpenItems();\r\n    if (openItems.length === 0) {\r\n      // If no items are open, open the first one\r\n      const firstItem = this.querySelector('collapsible-item');\r\n      if (firstItem) {\r\n        firstItem.setAttribute('expanded', '');\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Define the custom element\r\nif (!customElements.get('collapsible-list')) {\r\n  customElements.define('collapsible-list', CollapsibleList);\r\n}\r\n","/**\n * IconLabel Component\n * A custom element that displays an icon with a label\n */\n\nexport class IconLabel extends HTMLElement {\n  static get observedAttributes() {\n    return ['icon', 'label', 'reverse'];\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    \n    // Default values\n    this._icon = '';\n    this._label = '';\n    this._reverse = false;\n    this._initialized = false;\n  }\n\n  connectedCallback() {\n    if (!this._initialized) {\n      this._initializeComponent();\n      this._initialized = true;\n    }\n    this._render();\n  }\n\n  _initializeComponent() {\n    // Create styles\n    const style = document.createElement('style');\n    style.textContent = `\n      :host {\n        display: inline-flex;\n        align-items: center;\n        font-family: inherit;\n        color: currentColor;\n      }\n\n      .icon-label {\n        display: inline-flex;\n        align-items: center;\n        gap: 0.5rem;\n      }\n\n      .icon-label--reverse {\n        flex-direction: row-reverse;\n      }\n\n      .icon-label__icon {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        width: 1em;\n        height: 1em;\n      }\n      \n      .icon-label__icon img,\n      .icon-label__char {\n        width: 1em;\n        height: 1em;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n      \n      .icon-label__char {\n        font-size: 1em;\n        line-height: 1;\n      }\n    `;\n\n\n    // Create container\n    const container = document.createElement('span');\n    container.className = 'icon-label';\n    container.setAttribute('part', 'container');\n\n    // Create icon slot\n    const iconSlot = document.createElement('slot');\n    iconSlot.name = 'icon';\n    iconSlot.className = 'icon-label__icon';\n    iconSlot.setAttribute('part', 'icon');\n\n    // Create label slot\n    const labelSlot = document.createElement('slot');\n    labelSlot.className = 'icon-label__label';\n    labelSlot.setAttribute('part', 'label');\n\n    // Append slots to container\n    container.appendChild(iconSlot);\n    container.appendChild(labelSlot);\n\n    // Append elements to shadow root\n    this.shadowRoot.appendChild(style);\n    this.shadowRoot.appendChild(container);\n\n    // Store references\n    this._container = container;\n    this._iconSlot = iconSlot;\n    this._labelSlot = labelSlot;\n  }\n\n  _render() {\n    if (!this._initialized) return;\n\n    // Update classes based on properties\n    this._container.className = 'icon-label';\n    if (this._reverse) {\n      this._container.classList.add('icon-label--reverse');\n    }\n\n    // Update icon if provided\n    if (this._icon && this._iconSlot) {\n      this._iconSlot.innerHTML = '';\n      \n      // Check if the icon is a single character (likely an emoji or icon character)\n      const isIconChar = this._icon.length === 1 || \n                       (this._icon.length === 2 && this._icon.codePointAt(0) > 0xFFFF);\n      \n      if (isIconChar) {\n        // For single character icons (emojis, etc.)\n        const charSpan = document.createElement('span');\n        charSpan.className = 'icon-label__char';\n        charSpan.textContent = this._icon;\n        this._iconSlot.appendChild(charSpan);\n      } else {\n        // For image paths (URLs or data URIs)\n        const img = document.createElement('img');\n        img.src = this._icon;\n        img.alt = ''; // Decorative image\n        this._iconSlot.appendChild(img);\n      }\n    }\n\n    // Set the label text\n    const labelText = this._label || this.textContent.trim();\n    if (labelText && this._labelSlot) {\n      // Clear any existing content in the label slot\n      this._labelSlot.textContent = '';\n      \n      // If there's no explicit label attribute but there is text content,\n      // move the text content to the label slot\n      if (!this._label && this.textContent.trim()) {\n        while (this.firstChild) {\n          this._labelSlot.appendChild(this.firstChild);\n        }\n      } else {\n        // Otherwise, just set the text content\n        this._labelSlot.textContent = labelText;\n      }\n    }\n  }\n\n  // Getters and setters for properties\n  get icon() {\n    return this._icon;\n  }\n\n  set icon(value) {\n    this._icon = value;\n    this.setAttribute('icon', value);\n  }\n\n  get label() {\n    return this._label || this.textContent.trim();\n  }\n\n  set label(value) {\n    this._label = value;\n    if (this._labelSlot) {\n      this._labelSlot.textContent = value;\n    }\n  }\n\n  get reverse() {\n    return this._reverse;\n  }\n\n  set reverse(value) {\n    this._reverse = value !== null && value !== false;\n    this._render();\n  }\n\n  // Handle attribute changes\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'icon':\n        this._icon = newValue || '';\n        break;\n      case 'label':\n        this._label = newValue || '';\n        if (this._labelSlot) {\n          this._labelSlot.textContent = this._label;\n        }\n        break;\n      case 'reverse':\n        this._reverse = newValue !== null;\n        this._render();\n        break;\n    }\n  }\n}\n\n// Define the custom element\nif (!customElements.get('icon-label')) {\n  customElements.define('icon-label', IconLabel);\n}\n","/**\n * CollapsibleItem Component\n * A custom element that creates a collapsible list item\n * \n * @attr {boolean} expanded - Whether the item is expanded or collapsed\n * @attr {string} icon - Optional icon to display next to the label\n * @attr {string} label - The text label for the collapsible item\n * @attr {boolean} removeshift - If true, removes the left padding from the content area\n */\n\nimport { IconLabel } from '../../atoms/icon-label/IconLabel.js';\n\n// Import regular CSS\nimport './CollapsibleItem.css';\n\nexport class CollapsibleItem extends HTMLLIElement {\n    static get observedAttributes() {\n        return ['expanded', 'icon', 'label', 'removeshift', 'hide-icon'];\n    }\n    \n    constructor() {\n        super();\n        this._isExpanded = false;\n        this._handleClick = this._handleClick.bind(this);\n        this._header = null;\n        this._content = null;\n        this._initialRender = true;\n        this._removeShift = false;\n        this.rendered = false;\n        \n        // Add base class to the host element\n        this.classList.add('collapsible-item');\n        \n        // Initialize expanded state\n        if (this.hasAttribute('expanded')) {\n            this._isExpanded = true;\n            this.classList.add('collapsible-item--expanded');\n        }\n        \n        // Initialize no-padding state\n        if (this.hasAttribute('removeshift')) {\n            this.classList.add('collapsible-item--no-padding');\n        }\n    }\n\n    connectedCallback() {\n        // Ensure the component has the correct role for accessibility\n        if (!this.hasAttribute('role')) {\n            this.setAttribute('role', 'listitem');\n        }\n        \n        // Set up the component if not already rendered\n        if (!this.rendered) {\n            this._render();\n            this.rendered = true;\n            this._addEventListeners();\n            \n            // Ensure the content visibility is set correctly based on the expanded state\n            this._updateContentVisibility();\n        }\n        \n        // Ensure the component is properly styled\n        this.classList.add('collapsible-item');\n        \n        // Set initial expanded state\n        if (this.hasAttribute('expanded')) {\n            this._isExpanded = true;\n            this.classList.add('collapsible-item--expanded');\n        } else {\n            this._isExpanded = false;\n            this.classList.remove('collapsible-item--expanded');\n        }\n    }\n    \n    disconnectedCallback() {\n        this._removeEventListeners();\n    }\n    \n    _addEventListeners() {\n        // Add click listener to the component itself for event delegation\n        this.addEventListener('click', this._handleClick);\n    }\n    \n    _removeEventListeners() {\n        this.removeEventListener('click', this._handleClick);\n    }\n    \n    _handleClick(event) {\n        // Find the closest header from the click target\n        const header = event.target.closest('.collapsible-item__header');\n        if (!header) return; // Not a header click\n        \n        // Prevent the default action to avoid any native behavior\n        event.preventDefault();\n        event.stopPropagation();\n        \n        // Toggle the expanded state\n        const isExpanding = !this.hasAttribute('expanded');\n        \n        // Update the expanded attribute\n        if (isExpanding) {\n            this.setAttribute('expanded', '');\n        } else {\n            this.removeAttribute('expanded');\n        }\n        \n        // Update the internal state and UI\n        this._isExpanded = isExpanding;\n        this._updateContentVisibility();\n        \n        // Dispatch a custom event\n        this.dispatchEvent(new CustomEvent('toggle', {\n            detail: { expanded: isExpanding },\n            bubbles: true,\n            composed: true\n        }));\n    }\n    \n    _createHeader() {\n        const header = document.createElement('div');\n        header.className = 'collapsible-item__header';\n        \n        // Create a container for the icon and label\n        const contentWrapper = document.createElement('div');\n        contentWrapper.style.display = 'flex';\n        contentWrapper.style.alignItems = 'center';\n        contentWrapper.style.flex = '1';\n        \n        // Add icon if provided and not hidden\n        const hideIcon = this.hasAttribute('hide-icon');\n        const icon = this.getAttribute('icon');\n        if (icon && !hideIcon) {\n            const iconEl = document.createElement('span');\n            iconEl.className = 'collapsible-item__icon';\n            iconEl.textContent = icon;\n            iconEl.style.marginRight = '0.5rem';\n            contentWrapper.appendChild(iconEl);\n        }\n        \n        // Add label\n        const label = this.getAttribute('label') || '';\n        if (label) {\n            const labelEl = document.createElement('span');\n            labelEl.className = 'collapsible-item__label';\n            labelEl.textContent = label;\n            contentWrapper.appendChild(labelEl);\n        }\n        \n        // Add the content wrapper to the header\n        header.appendChild(contentWrapper);\n                \n        return header;\n    }\n    \n    _render() {\n        // Prevent re-entrancy during rendering\n        if (!this._isRendering) {\n            this._isRendering = true;\n            \n            // Store any existing content that should be preserved\n            const existingContent = [];\n            Array.from(this.children).forEach(child => {\n                if (child !== this._header && child !== this._content) {\n                    existingContent.push(child);\n                }\n            });\n            \n            // Clear existing content\n            while (this.firstChild) {\n                this.removeChild(this.firstChild);\n            }\n            \n            // Create and append header\n            this._header = this._createHeader();\n            this.appendChild(this._header);\n            \n            // Set header attributes for accessibility\n            if (this._header) {\n                this._header.setAttribute('role', 'button');\n                this._header.setAttribute('aria-expanded', this._isExpanded ? 'true' : 'false');\n                this._header.setAttribute('tabindex', '0');\n                \n                // Add keyboard support\n                this._header.addEventListener('keydown', (e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                        e.preventDefault();\n                        this._toggleExpanded();\n                    }\n                });\n            }\n            \n            // Create and append content container\n            this._content = this._createContent();\n            if (this._content) {\n                this.appendChild(this._content);\n                \n                // Add back any existing content to the content container\n                existingContent.forEach(child => {\n                    this._content.appendChild(child);\n                });\n            }\n            \n            // Ensure proper ARIA attributes for accessibility\n            this.setAttribute('role', 'listitem');\n            \n            // Set initial content visibility\n            this._updateContentVisibility();\n            \n            // Mark as rendered\n            this.rendered = true;\n            this._isRendering = false;\n        }\n    }\n    \n    _createContent() {\n        const content = document.createElement('div');\n        content.className = 'collapsible-item__content';\n        \n        // Filter out any header elements and their content\n        const headerElements = this.querySelectorAll('.collapsible-item__header, .collapsible-item__label, .collapsible-item__icon');\n        const headerElementSet = new Set(headerElements);\n        \n        // Process direct children that are not part of the header\n        const filteredChildren = Array.from(this.childNodes).filter(node => {\n            // Keep only element nodes that are not in the header\n            if (node.nodeType === Node.ELEMENT_NODE) {\n                return !headerElementSet.has(node) && !node.closest('.collapsible-item__header');\n            }\n            // Keep text nodes that are not just whitespace\n            if (node.nodeType === Node.TEXT_NODE) {\n                return node.textContent.trim() !== '' && \n                       !node.textContent.includes('▶') && \n                       !node.textContent.includes('▼');\n            }\n            return false;\n        });\n        \n        // Add the filtered children to the content\n        filteredChildren.forEach(child => {\n            content.appendChild(child.cloneNode(true));\n        });\n        \n        return content;\n    }\n    \n    get expanded() {\n        return this._isExpanded;\n    }\n    \n    set expanded(value) {\n        if (this._isExpanded === value) return; // No change needed\n        \n        this._isExpanded = value;\n        \n        // Update the attribute to reflect the state in the DOM\n        if (this._isExpanded) {\n            this.setAttribute('expanded', '');\n        } else {\n            this.removeAttribute('expanded');\n        }\n        \n        // Update the content visibility immediately\n        this._updateContentVisibility();\n        \n        // Dispatch the toggle event\n        this.dispatchEvent(new CustomEvent('toggle', {\n            detail: { expanded: this._isExpanded },\n            bubbles: true,\n            composed: true\n        }));\n    }\n    \n    _toggleExpanded() {\n        this._isExpanded = !this._isExpanded;\n        \n        // Update the expanded attribute\n        if (this._isExpanded) {\n            this.setAttribute('expanded', '');\n        } else {\n            this.removeAttribute('expanded');\n        }\n        \n        // Update the UI\n        this._updateContentVisibility();\n        \n        // Dispatch the toggle event\n        this.dispatchEvent(new CustomEvent('toggle', {\n            detail: { expanded: this._isExpanded },\n            bubbles: true,\n            composed: true\n        }));\n    }\n    \n    _updateContentVisibility() {\n        if (!this._content || !this._header) return;\n        \n        const hideIcon = this.hasAttribute('hide-icon');\n        \n        if (this._isExpanded) {\n            this._content.classList.add('collapsible-item__content--expanded');\n            this._content.style.display = 'block';\n            this._header.setAttribute('aria-expanded', 'true');\n            this.classList.add('collapsible-item--expanded');\n            // Update icon to expanded state (down arrow) only if not hidden\n            if (!hideIcon) {\n                this.setAttribute('icon', '▼');\n            }\n        } else {\n            this._content.classList.remove('collapsible-item__content--expanded');\n            this._content.style.display = 'none';\n            this._header.setAttribute('aria-expanded', 'false');\n            this.classList.remove('collapsible-item--expanded');\n            // Update icon to collapsed state (right arrow) only if not hidden\n            if (!hideIcon) {\n                this.setAttribute('icon', '▶');\n            }\n        }\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n        if (name === 'removeshift') {\n            this._removeShift = newValue !== null;\n            if (this._removeShift) {\n                this.classList.add('collapsible-item--no-padding');\n            } else {\n                this.classList.remove('collapsible-item--no-padding');\n            }\n        } else if (name === 'hide-icon' && this._header) {\n            // Handle hide-icon attribute changes\n            const iconEl = this._header.querySelector('.collapsible-item__icon');\n            if (newValue !== null) {\n                // hide-icon is set, remove the icon if it exists\n                if (iconEl) {\n                    iconEl.remove();\n                }\n            } else if (this.hasAttribute('icon')) {\n                // hide-icon is removed, add the icon back if we have an icon attribute\n                if (!iconEl) {\n                    const icon = this.getAttribute('icon');\n                    const newIconEl = document.createElement('span');\n                    newIconEl.className = 'collapsible-item__icon';\n                    newIconEl.textContent = icon;\n                    newIconEl.style.marginRight = '0.5rem';\n                    const contentWrapper = this._header.firstElementChild;\n                    if (contentWrapper) {\n                        contentWrapper.insertBefore(newIconEl, contentWrapper.firstChild);\n                    }\n                }\n            }\n        } else if (name === 'expanded') {\n            const wasExpanded = this._isExpanded;\n            this._isExpanded = newValue !== null;\n            \n            // Only update if the state actually changed\n            if (this._isExpanded !== wasExpanded) {\n                this._updateContentVisibility();\n            }\n        } else if (name === 'icon' && this._header) {\n            // Update the icon if it exists, or create it if it doesn't\n            let iconEl = this._header.querySelector('.collapsible-item__icon');\n            if (newValue) {\n                if (!iconEl) {\n                    iconEl = document.createElement('span');\n                    iconEl.className = 'collapsible-item__icon';\n                    this._header.insertBefore(iconEl, this._header.firstChild);\n                }\n                iconEl.textContent = newValue;\n            } else if (iconEl) {\n                this._header.removeChild(iconEl);\n            }\n        } else if (name === 'label' && this._header) {\n            // Update the label if it exists, or create it if it doesn't\n            let labelEl = this._header.querySelector('.collapsible-item__label');\n            if (labelEl) {\n                labelEl.textContent = newValue || '';\n            } else if (newValue) {\n                labelEl = document.createElement('span');\n                labelEl.className = 'collapsible-item__label';\n                labelEl.textContent = newValue;\n                this._header.appendChild(labelEl);\n            }\n        }\n    }\n}\n\n// Define the custom element with the correct name\nconst elementName = 'collapsible-item';\n\n// Check if the element is already defined and undefine it if necessary\nif (typeof window !== 'undefined' && window.customElements) {\n    // First, try to undefine the element if it exists\n    if (window.customElements.get(elementName)) {\n        const oldElement = window.customElements.get(elementName);\n        delete window.customElements._elements[elementName];\n    }\n    \n    // Define the element with the proper configuration\n    window.customElements.define(elementName, CollapsibleItem, { extends: 'li' });\n}","// Core components\nexport * from './molecules/collapsible-list/CollapsibleList.js';\nexport * from './molecules/collapsible-item/CollapsibleItem.js';\n\n// Additional components (dynamically imported when needed)\nlet additionalComponents = {};\n\n// Function to load additional components\nexport async function loadAdditionalComponents() {\n  try {\n    const selectionMenuModule = await import('./organisms/selection-menu/SelectionMenu.js');\n    additionalComponents.SelectionMenu = selectionMenuModule.default || selectionMenuModule;\n  } catch (e) {\n    console.warn('SelectionMenu component not found or failed to load', e);\n  }\n\n  try {\n    const productLayoutModule = await import('./templates/product-layout/ProductLayout.js');\n    additionalComponents.ProductLayout = productLayoutModule.default || productLayoutModule;\n  } catch (e) {\n    console.warn('ProductLayout component not found or failed to load', e);\n  }\n  \n  return additionalComponents;\n}\n\n// Export a function to get additional components\nexport function getAdditionalComponents() {\n  return additionalComponents;\n}\n","import { useEffect, useRef, forwardRef, useMemo } from 'react';\nimport * as webComponents from '../../components';\n\n/**\n * Creates a React wrapper for a web component\n * @param {string} componentName - The name of the component\n * @param {Function} webComponent - The web component constructor\n * @returns {Function} React component\n */\nconst createReactWrapper = (componentName, webComponent) => {\n  const ReactComponent = forwardRef(({ children, ...props }, ref) => {\n    const elementRef = useRef(null);\n    const eventHandlers = useRef({});\n    const tagName = webComponent.is || componentName.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n\n    // Memoize props to prevent unnecessary effect runs\n    const { elementProps, eventListeners } = useMemo(() => {\n      const elementProps = {};\n      const eventListeners = {};\n\n      Object.entries(props).forEach(([key, value]) => {\n        if (typeof value === 'function' && key.startsWith('on')) {\n          const eventName = key.substring(2).toLowerCase();\n          eventListeners[eventName] = value;\n        } else if (key !== 'children') {\n          elementProps[key] = value;\n        }\n      });\n\n      return { elementProps, eventListeners };\n    }, [props]);\n\n    // Handle event listeners\n    useEffect(() => {\n      const element = elementRef.current;\n      if (!element) return;\n\n      const currentHandlers = {};\n\n      // Add new event listeners\n      Object.entries(eventListeners).forEach(([eventName, handler]) => {\n        const wrappedHandler = (event) => {\n          // Create a synthetic event-like object for better React compatibility\n          const syntheticEvent = {\n            ...event,\n            nativeEvent: event,\n            currentTarget: element,\n            target: event.target,\n            preventDefault() {\n              event.preventDefault();\n            },\n            stopPropagation() {\n              event.stopPropagation();\n            },\n          };\n\n          handler(syntheticEvent);\n        };\n\n        element.addEventListener(eventName, wrappedHandler);\n        currentHandlers[eventName] = wrappedHandler;\n      });\n\n      // Store current handlers for cleanup\n      const previousHandlers = eventHandlers.current;\n      eventHandlers.current = currentHandlers;\n\n      // Cleanup function\n      return () => {\n        // Remove only the handlers that are no longer needed\n        Object.entries(previousHandlers).forEach(([eventName, handler]) => {\n          if (currentHandlers[eventName] !== handler) {\n            element.removeEventListener(eventName, handler);\n          }\n        });\n      };\n    }, [eventListeners]);\n\n    // Handle ref forwarding\n    useEffect(() => {\n      if (!ref) return;\n      \n      if (typeof ref === 'function') {\n        ref(elementRef.current);\n      } else if (ref && typeof ref === 'object') {\n        ref.current = elementRef.current;\n      }\n    }, [ref]);\n\n    // Handle boolean attributes\n    const processedProps = useMemo(() => {\n      const result = { ...elementProps };\n      \n      // Convert boolean values to empty strings for web component boolean attributes\n      Object.keys(result).forEach(key => {\n        if (result[key] === true) {\n          result[key] = ''; // Empty string makes the attribute present without a value\n        } else if (result[key] === false || result[key] === null || result[key] === undefined) {\n          delete result[key]; // Remove falsy values to unset the attribute\n        }\n      });\n      \n      return result;\n    }, [elementProps]);\n\n    try {\n      return (\n        <tag-name is={tagName} ref={elementRef} {...processedProps}>\n          {children}\n        </tag-name>\n      );\n    } catch (error) {\n      console.error(`Error rendering ${componentName}:`, error);\n      return null;\n    }\n  });\n\n  // Set display name for better debugging\n  ReactComponent.displayName = componentName;\n  \n  // Add a reference to the original web component\n  ReactComponent.webComponent = webComponent;\n  \n  return ReactComponent;\n};\n\n// Auto-generate React wrappers for all web components\nconst wrappers = {};\n\nObject.entries(webComponents).forEach(([componentName, webComponent]) => {\n  if (typeof webComponent === 'function' && webComponent.name) {\n    try {\n      wrappers[componentName] = createReactWrapper(componentName, webComponent);\n    } catch (error) {\n      console.error(`Failed to create React wrapper for ${componentName}:`, error);\n    }\n  }\n});\n\n// Export individual components for better tree-shaking\nconst {\n  IconLabel,\n  CollapsibleItem,\n  CollapsibleList,\n  ImageCollection,\n  SelectionMenu,\n  ProductLayout,\n  ...restComponents\n} = wrappers;\n\n// Export all components as named exports\nexport { \n  IconLabel,\n  CollapsibleItem,\n  CollapsibleList,\n  ImageCollection,\n  SelectionMenu,\n  ProductLayout \n};\n\n// Export all components as default\nexport default wrappers;\n","/**\n * SelectionMenu Component\n * A collapsible menu that allows selection of leaf nodes using CollapsibleItem\n * \n * @fires item-selected - Dispatched when a leaf node is selected\n * @property {string} items - JSON string representing the menu items structure\n * @property {string} selected - ID of the currently selected item\n */\n\nexport class SelectionMenu extends HTMLElement {\n  static get observedAttributes() {\n    return ['items', 'selected'];\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._items = [];\n    this._selectedId = null;\n    this._boundOnItemClick = this._onItemClick.bind(this);\n    \n    // Import the CollapsibleItem component\n    import('../../molecules/collapsible-item/CollapsibleItem.js');\n  }\n\n  connectedCallback() {\n    this._render();\n  }\n\n  disconnectedCallback() {\n    this._removeEventListeners();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'items':\n        this._items = newValue ? JSON.parse(newValue) : [];\n        this._render();\n        break;\n      case 'selected':\n        this._selectedId = newValue;\n        this._updateSelectedState();\n        break;\n    }\n  }\n\n  get items() {\n    return JSON.stringify(this._items);\n  }\n\n  set items(value) {\n    this._items = value ? JSON.parse(value) : [];\n    this._render();\n  }\n\n  get selected() {\n    return this._selectedId;\n  }\n\n  set selected(value) {\n    if (this._selectedId !== value) {\n      this._selectedId = value;\n      this._updateSelectedState();\n    }\n  }\n\n  _render() {\n    if (!this.shadowRoot) return;\n    \n    this.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          --primary-color: #4a6cf7;\n          --hover-bg: #f5f8ff;\n          --selected-bg: #e6f0ff;\n          --border-color: #e2e8f0;\n          --text-color: #2d3748;\n          --text-secondary: #4a5568;\n        }\n        \n        .menu-container {\n          border: 1px solid var(--border-color);\n          border-radius: 6px;\n          overflow: hidden;\n        }\n        \n        .menu-item {\n          cursor: pointer;\n          transition: background-color 0.2s ease;\n          margin: 2px 0;\n          border-radius: 4px;\n        }\n        \n        .menu-item:hover {\n          background-color: var(--hover-bg, #f5f8ff);\n        }\n        \n        .menu-item--selected {\n          background-color: var(--selected-bg, #e6f0ff);\n          color: var(--primary-color, #4a6cf7);\n          font-weight: 500;\n        }\n        \n        .menu-item--selected:hover {\n          background-color: var(--selected-bg, #e6f0ff);\n        }\n        \n        /* Style for the collapsible item header */\n        .menu-item::part(header) {\n          padding: 8px 12px;\n          display: flex;\n          align-items: center;\n        }\n        \n        /* Style for the collapsible item content */\n        .menu-item::part(content) {\n          padding: 0;\n          overflow: hidden;\n          transition: max-height 0.3s ease, opacity 0.2s ease;\n          max-height: 0;\n          opacity: 0;\n          margin: 0;\n        }\n        \n        .menu-item::part(content).menu-item__content--expanded {\n          max-height: 1000px; /* Adjust based on your needs */\n          opacity: 1;\n          padding: 4px 0 4px 1rem;\n        }\n        \n        .menu-item__child-list {\n          list-style: none;\n          padding: 0;\n          margin: 0 0 0 1rem;\n        }\n        \n        /* Remove bullets from ul elements */\n        ul {\n          list-style-type: none;\n          padding: 0;\n          margin: 0;\n        }\n        \n        /* Ensure list items have no default styling */\n        li {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n        \n        /* Leaf item styles */\n        .menu-item__leaf {\n          display: flex;\n          align-items: center;\n          padding: 4px 12px;\n          cursor: pointer;\n          transition: background-color 0.2s ease;\n          border-radius: 4px;\n        }\n        \n        .menu-item__leaf:hover {\n          background-color: var(--hover-bg, #f5f8ff);\n        }\n        \n        .menu-item__leaf.menu-item--selected {\n          background-color: var(--selected-bg, #e6f0ff);\n          color: var(--primary-color, #4a6cf7);\n          font-weight: 500;\n        }\n        \n        /* Arrow icon for collapsible items */\n        .menu-item__arrow {\n          display: inline-block;\n          width: 12px;\n          text-align: center;\n          transition: transform 0.2s ease;\n        }\n        \n        .menu-item[expanded] .menu-item__arrow {\n          transform: rotate(90deg);\n        }\n      </style>\n      <div class=\"menu-container\">\n        ${this._renderItems(this._items, 0)}\n      </div>\n    `;\n    \n    this._addEventListeners();\n  }\n  \n  _renderItems(items, level = 0) {\n    if (!items || !items.length) return '';\n    \n    // Create a container for the list\n    const listContainer = document.createElement('ul');\n    listContainer.style.listStyle = 'none';\n    listContainer.style.padding = '0';\n    listContainer.style.margin = '0';\n    \n    items.forEach(item => {\n      const hasChildren = item.children && item.children.length > 0;\n      const isSelected = this._selectedId === item.id;\n      \n      // Create list item\n      const li = document.createElement('li');\n      li.setAttribute('data-id', item.id);\n      \n      if (hasChildren) {\n        // For items with children, use collapsible-item\n        li.setAttribute('is', 'collapsible-item');\n        li.setAttribute('data-id', item.id);\n        li.setAttribute('label', item.name);\n        \n        // Determine initial state\n        const hasSelectedDescendant = this._hasSelectedDescendant(item);\n        const isExpanded = hasSelectedDescendant || isSelected;\n        \n        // Set initial expanded state\n        if (isExpanded) {\n          li.setAttribute('expanded', '');\n        }\n        \n        // Set the arrow icon using the icon attribute\n        li.setAttribute('icon', isExpanded ? '▼' : '▶');\n        li.style.marginRight = '8px';\n        li.style.transition = 'transform 0.2s ease';\n        \n        if (isSelected) {\n          li.classList.add('menu-item--selected');\n        }\n        \n        // Create and append child list\n        const childList = document.createElement('ul');\n        childList.className = 'menu-item__child-list';\n        childList.innerHTML = this._renderItems(item.children, level + 1);\n        \n        // Create content container with proper styling\n        const contentSlot = document.createElement('div');\n        contentSlot.slot = 'content';\n        contentSlot.className = 'menu-item__content';\n        \n        // Add the child list to the content slot\n        contentSlot.appendChild(childList);\n        \n        // Add the content slot to the collapsible item\n        li.appendChild(contentSlot);\n        \n        // Handle the toggle event to update the content visibility\n        li.addEventListener('toggle', (e) => {\n          contentSlot.style.display = e.detail.expanded ? 'block' : 'none';\n        });\n      } else {\n        // For leaf nodes, just use a span\n        const span = document.createElement('span');\n        span.className = 'menu-item__leaf';\n        if (isSelected) span.classList.add('menu-item--selected');\n        \n      \n        \n        // Add label\n        const label = document.createElement('span');\n        label.className = 'menu-item__label';\n        label.textContent = item.name;\n        span.appendChild(label);\n        \n        // Add click handler for selection\n        span.addEventListener('click', (e) => {\n          e.stopPropagation();\n          this._selectedId = item.id;\n          this._updateSelectedState();\n          this.dispatchEvent(new CustomEvent('item-selected', {\n            detail: {\n              id: item.id,\n              item: item,\n              name: item.name\n            },\n            bubbles: true,\n            composed: true\n          }));\n        });\n        \n        li.appendChild(span);\n      }\n      \n      listContainer.appendChild(li);\n    });\n    \n    return level === 0 ? listContainer.outerHTML : listContainer.innerHTML;\n  }\n  \n  _addEventListeners() {\n    this.shadowRoot.addEventListener('click', this._boundOnItemClick);\n  }\n  \n  _removeEventListeners() {\n    this.shadowRoot.removeEventListener('click', this._boundOnItemClick);\n  }\n  \n  _onItemClick(event) {\n    // Handle leaf node clicks\n    const leafNode = event.target.closest('.menu-item__leaf');\n    if (leafNode) {\n      event.stopPropagation();\n      const itemId = leafNode.getAttribute('data-id');\n      if (itemId) {\n        this.selected = itemId;\n        this._updateSelectedState();\n        this.dispatchEvent(new CustomEvent('item-selected', {\n          detail: { id: itemId },\n          bubbles: true,\n          composed: true\n        }));\n      }\n      return;\n    }\n    \n    // Handle collapsible item clicks\n    const header = event.target.closest('.collapsible-item__header');\n    if (!header) return;\n    \n    const itemElement = header.parentElement;\n    if (itemElement && itemElement.getAttribute('is') === 'collapsible-item') {\n      event.stopPropagation();\n      \n      // Toggle the expanded state\n      const isExpanded = itemElement.hasAttribute('expanded');\n      const arrowIcon = itemElement.querySelector('.menu-item__arrow');\n      \n      if (isExpanded) {\n        itemElement.removeAttribute('expanded');\n        if (arrowIcon) arrowIcon.textContent = '▶';\n      } else {\n        itemElement.setAttribute('expanded', '');\n        if (arrowIcon) arrowIcon.textContent = '▼';\n      }\n      \n      // Dispatch a custom event for the toggle action\n      itemElement.dispatchEvent(new CustomEvent('toggle', {\n        detail: { expanded: !isExpanded },\n        bubbles: true,\n        composed: true\n      }));\n    }\n  }\n  \n  _updateSelectedState() {\n    if (!this.shadowRoot) return;\n    \n    // Remove selected class from all items\n    const allCollapsibleItems = this.shadowRoot.querySelectorAll('li[is=\"collapsible-item\"]');\n    const allLeafItems = this.shadowRoot.querySelectorAll('.menu-item__leaf');\n    \n    allCollapsibleItems.forEach(item => {\n      item.classList.remove('menu-item--selected');\n      item.removeAttribute('selected');\n    });\n    \n    allLeafItems.forEach(leaf => {\n      leaf.classList.remove('menu-item--selected');\n    });\n    \n    // Add selected class to the selected item\n    if (this._selectedId) {\n      \n      // Check collapsible items\n      const selectedCollapsibleItem = this.shadowRoot.querySelector(`li[is=\"collapsible-item\"][data-id=\"${this._selectedId}\"]`);\n      if (selectedCollapsibleItem) {\n        selectedCollapsibleItem.classList.add('menu-item--selected');\n        selectedCollapsibleItem.setAttribute('selected', '');\n      }\n      \n      // Check leaf items\n      const selectedLeafItem = this.shadowRoot.querySelector(`li[data-id=\"${this._selectedId}\"] .menu-item__leaf`);\n      if (selectedLeafItem) {\n        selectedLeafItem.classList.add('menu-item--selected');\n      }\n      \n      // If we didn't find the item, it might be because it's in a closed collapsible item\n      if (!selectedCollapsibleItem && !selectedLeafItem) {\n        console.warn('Could not find selected item in the DOM. It might be in a closed collapsible section.');\n      }\n    }\n  }\n  \n  _hasSelectedDescendant(item) {\n    if (!item) return false;\n    \n    // Check if this item is selected\n    if (item.id === this._selectedId) return true;\n    \n    // Check if any child is selected\n    if (item.children) {\n      return item.children.some(child => this._hasSelectedDescendant(child));\n    }\n    \n    return false;\n  }\n  \n  _findItemById(items, id) {\n    if (!items || !items.length) return null;\n    \n    for (const item of items) {\n      if (item.id === id) return item;\n      if (item.children) {\n        const found = this._findItemById(item.children, id);\n        if (found) return found;\n      }\n    }\n    return null;\n  }\n}\n\n// Define the custom element\nif (!customElements.get('selection-menu')) {\n  customElements.define('selection-menu', SelectionMenu);\n}","import { CollapsibleItem } from '../../molecules/collapsible-item/CollapsibleItem.js';\n\nexport class ImageCollection extends HTMLElement {\n    static get observedAttributes() {\n        return ['images'];\n    }\n\n    constructor() {\n        super();\n        this.attachShadow({ mode: 'open' });\n        this._images = [];\n        this._handleToggle = this._handleToggle.bind(this);\n        this._currentOpenIndex = 0;\n    }\n\n    get images() {\n        return this._images;\n    }\n\n    set images(value) {\n        if (Array.isArray(value)) {\n            this._images = value;\n            this.render();\n        } else if (typeof value === 'string') {\n            try {\n                this._images = JSON.parse(value);\n                this.render();\n            } catch (e) {\n            }\n        }\n    }\n\n    connectedCallback() {\n        this.render();\n        this.shadowRoot.addEventListener('toggle', this._handleToggle);\n    }\n\n    disconnectedCallback() {\n        this.shadowRoot.removeEventListener('toggle', this._handleToggle);\n    }\n\n    _handleToggle(event) {\n        // Prevent event from bubbling up\n        event.stopPropagation();\n        \n        // Prevent reentrant calls\n        if (this._isHandlingToggle) return;\n        this._isHandlingToggle = true;\n        \n        let index = -1;\n        let wasExpanded = false;\n        \n        try {\n            \n            // Find the clicked collapsible item by traversing up the composed path\n            const target = event.composedPath().find(\n                node => node.nodeType === Node.ELEMENT_NODE && \n                       node.getAttribute && \n                       node.getAttribute('is') === 'collapsible-item'\n            );\n            \n            if (!target) {\n                return;\n            }\n\n            // Get all collapsible items\n            const allItems = Array.from(this.shadowRoot.querySelectorAll('li[is=\"collapsible-item\"]'));\n            index = allItems.indexOf(target);\n            \n            if (index === -1) {\n                return;\n            }\n            \n            // Prevent toggling if this item is already open\n            if (index === this._currentOpenIndex) {\n                return;\n            }\n            \n            wasExpanded = target.expanded;\n            \n            // Update all items\n            \n            // First, close all items except the target\n            allItems.forEach((item, i) => {\n                if (i !== index && item.expanded) {\n                    item.expanded = false;\n                }\n            });\n            \n            // Then toggle the target item if needed\n            if (index === this._currentOpenIndex) {\n                // Clicked the currently open item - close it\n                target.expanded = false;\n                this._currentOpenIndex = -1;\n            } else {\n                // Open the clicked item\n                target.expanded = true;\n                this._currentOpenIndex = index;\n            }\n        } finally {\n            // Always clear the flag, even if an error occurred\n            this._isHandlingToggle = false;\n        }\n        \n        // Dispatch our custom event\n        this.dispatchEvent(new CustomEvent('toggle', {\n            detail: { \n                index,\n                expanded: !wasExpanded,\n                source: 'image-collection'\n            },\n            bubbles: true,\n            composed: true\n        }));\n    }\n\n    \n    _onItemToggle(event) {\n        // Stop propagation to prevent double-handling\n        event.stopPropagation();\n        \n        const targetItem = event.target.closest('li[is=\"collapsible-item\"]');\n        if (!targetItem) return;\n\n        const items = Array.from(this.shadowRoot.querySelectorAll('li[is=\"collapsible-item\"]'));\n        const index = items.indexOf(targetItem);\n        \n        if (index === -1) return;\n\n        // If the clicked item is being closed, just update our state\n        if (!event.detail.expanded) {\n            if (this._currentOpenIndex === index) {\n                this._currentOpenIndex = -1;\n            }\n            return;\n        }\n\n        // Close the previously open item if it's different from the clicked one\n        if (this._currentOpenIndex !== -1 && this._currentOpenIndex !== index) {\n            const previousItem = items[this._currentOpenIndex];\n            if (previousItem) {\n                previousItem.toggle(false);\n            }\n        }\n        \n        this._currentOpenIndex = index;\n    }\n\n    render() {\n        if (!this.shadowRoot) return;\n        \n        // Only expand the first item if no item is currently expanded\n        if (this._currentOpenIndex === -1 && this._images.length > 0) {\n            this._currentOpenIndex = 0;\n        }\n        \n        this.shadowRoot.innerHTML = `\n            <style>\n                .image-collection {\n                    width: 100%;\n                    max-width: 800px;\n                    margin: 0 auto;\n                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n                }\n                \n                .image-collection__container {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 0;\n                    width: 100%;\n                    list-style: none;\n                    padding: 0;\n                }\n                \n                .image-collection__item {\n                    width: 100%;\n                    border: 1px solid #e2e8f0;\n                    border-radius: 4px;\n                    overflow: hidden;\n                }\n                \n                .image-collection__image {\n                    width: 100%;\n                    height: auto;\n                    display: block;\n                }\n                \n                .image-collection__title {\n                    font-weight: 600;\n                    padding: 0.8rem 1rem;\n                    background-color: #f8fafc;\n                    width: 100%;\n                    cursor: pointer;\n                    transition: background-color 0.2s;\n                }\n                \n                .image-collection__title:hover {\n                    background-color: #f1f5f9;\n                }\n                \n                .image-collection .collapsible-item__header {\n                    padding: 0.5rem 1rem;\n                    background: none;\n                    border: none;\n                    width: 100%;\n                    text-align: left;\n                    cursor: pointer;\n                }\n                \n                .image-collection .collapsible-item__content {\n                    margin: 0;\n                    transition: all 0.3s ease;\n                }\n                \n                .image-collection li[is=\"collapsible-item\"] {\n                    border: 1px solid #e2e8f0;\n                    border-radius: 4px;\n                    overflow: hidden;\n                }\n                \n                .image-collection li[is=\"collapsible-item\"]:last-child {\n                    margin-bottom: 0;\n                }\n            </style>\n            <div class=\"image-collection\">\n                <ul class=\"image-collection__container\">\n                    ${this._images.map((image, index) => `\n                        <li is=\"collapsible-item\" \n                            label=\"${image.title}\" \n                            ${image.removeshift ? 'removeshift=\"true\"' : ''}\n                            ${this._currentOpenIndex === index ? 'expanded' : ''}\n                            hide-icon\n                            >\n                            <div slot=\"content\">\n                                <img \n                                    class=\"image-collection__image\" \n                                    src=\"${image.src}\" \n                                    alt=\"${image.title}\"\n                                    loading=\"lazy\"\n                                >\n                            </div>\n                        </li>\n                    `).join('')}\n                </ul>\n            </div>\n        `;\n    }\n}\n\nif (!customElements.get('image-collection')) {\n    customElements.define('image-collection', ImageCollection);\n}","/**\n * ProductLayout\n * A layout component that displays an image collection, title, and content\n */\nimport { ImageCollection } from '../../organisms/image-collection/ImageCollection.js';\n\n// Import sample images\nconst defaultImages = [\n  {\n    title: 'Nature',\n    src: 'images/samples/nature.jpg',\n    alt: 'Scenic nature landscape',\n    description: 'A beautiful landscape showcasing nature\\'s beauty.'\n  },\n  {\n    title: 'Architecture',\n    src: 'images/samples/architecture.jpg',\n    alt: 'Modern architecture building',\n    description: 'Stunning modern architecture design.'\n  },\n  {\n    title: 'Technology',\n    src: 'images/samples/technology.jpg',\n    alt: 'Technology circuit board',\n    description: 'Close-up of an advanced circuit board.'\n  }\n];\n\nexport class ProductLayout extends HTMLElement {\n  static get observedAttributes() {\n    return ['title', 'images'];\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._title = 'Product Name';\n    this._images = [];\n    this._isConnected = false;\n    this._hasRendered = false;\n    this._isUpdating = false;\n    this._elements = null;\n    this._render = this._render.bind(this);\n  }\n\n  connectedCallback() {\n    this._isConnected = true;\n    this._render();\n  }\n\n  disconnectedCallback() {\n    this._isConnected = false;\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n    \n    if (name === 'title') {\n      this._title = newValue || 'Product Name';\n      this._updateTitle();\n    } else if (name === 'images') {\n      if (typeof newValue === 'string') {\n        try {\n          const parsed = JSON.parse(newValue);\n          this.images = Array.isArray(parsed) ? parsed : [];\n        } catch (e) {\n          console.error('Invalid images JSON:', e);\n          this.images = [];\n        }\n      } else if (Array.isArray(newValue)) {\n        this.images = newValue;\n      } else {\n        this.images = [];\n      }\n    }\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  set title(value) {\n    if (this._title === value) return;\n    this._title = value || '';\n    this._updateTitle();\n  }\n\n  get images() {\n    return this._images;\n  }\n\n  set images(value) {\n    if (Array.isArray(value)) {\n      this._images = value.length > 0 ? value : [...defaultImages];\n    } else if (typeof value === 'string') {\n      try {\n        const parsed = JSON.parse(value);\n        this._images = Array.isArray(parsed) ? parsed : [...defaultImages];\n      } catch (e) {\n        console.error('Invalid images JSON:', e);\n        this._images = [...defaultImages];\n      }\n    } else {\n      this._images = [...defaultImages];\n    }\n    this._updateImages();\n  }\n\n  _updateTitle() {\n    if (!this._elements?.title) return;\n    this._elements.title.textContent = this._title;\n  }\n\n  _updateImages() {\n    if (!this._elements?.imageCollection) return;\n    // Ensure we're passing a fresh copy of the array to trigger the setter\n    this._elements.imageCollection.images = [...this._images];\n    \n    // Ensure the ImageCollection is visible\n    if (this._elements.imageCollectionContainer) {\n      this._elements.imageCollectionContainer.style.display = 'block';\n    }\n  }\n\n  _render() {\n    if (this._isUpdating || !this.shadowRoot) return;\n    this._isUpdating = true;\n\n    try {\n      if (!this._hasRendered) {\n        this.shadowRoot.innerHTML = `\n          <style>\n            :host {\n              display: block;\n              max-width: 1200px;\n              margin: 0 auto;\n              padding: 2rem;\n              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n            }\n            \n            .product-layout {\n              display: grid;\n              grid-template-columns: 1fr;\n              gap: 2rem;\n            }\n            \n            .product-header {\n              text-align: center;\n              margin-bottom: 2rem;\n            }\n            \n            .product-title {\n              font-size: 2.5rem;\n              color: #2d3748;\n              margin: 0 0 1rem;\n            }\n            \n            .content {\n              line-height: 1.6;\n              color: #4a5568;\n            }\n            \n            .image-collection-container {\n              margin: 2rem 0;\n            }\n            \n            /* Remove padding from collapsible items */\n            image-collection::part(content) {\n              padding: 0;\n            }\n            \n            @media (min-width: 1024px) {\n              .product-layout {\n                grid-template-columns: 1fr 1fr;\n                align-items: start;\n              }\n            }\n          </style>\n          <div class=\"product-layout\">\n            <div class=\"product-content\">\n              <div class=\"product-header\">\n                <h1 class=\"product-title\" id=\"title\"></h1>\n              </div>\n              <div class=\"content\" id=\"content\">\n                <slot></slot>\n              </div>\n            </div>\n            <div class=\"image-collection-container\" id=\"imageCollectionContainer\" style=\"display: none;\">\n              <image-collection id=\"imageCollection\"></image-collection>\n            </div>\n          </div>\n        `;\n\n        this._elements = {\n          title: this.shadowRoot.getElementById('title'),\n          content: this.shadowRoot.getElementById('content'),\n          imageCollection: this.shadowRoot.getElementById('imageCollection'),\n          imageCollectionContainer: this.shadowRoot.getElementById('imageCollectionContainer')\n        };\n        \n        // Initialize with default images if none provided\n        if (this._images.length === 0) {\n          this._images = [...defaultImages];\n        }\n\n        this._hasRendered = true;\n      }\n\n      this._updateTitle();\n      this._updateImages();\n    } finally {\n      this._isUpdating = false;\n    }\n  }\n}\n\n// Auto-register the component when loaded directly\nif (typeof window !== 'undefined' && !customElements.get('product-layout')) {\n  customElements.define('product-layout', ProductLayout);\n}\n"],"names":["HTMLElement","observedAttributes","constructor","this","attachShadow","mode","_isUpdating","_handleItemToggle","bind","container","document","createElement","slot","style","textContent","appendChild","shadowRoot","append","connectedCallback","_initialized","_initializeComponent","_updateReverseHeading","addEventListener","hasAttribute","_ensureOneItemExpanded","_setupMutationObserver","setAttribute","_observer","MutationObserver","async","mutations","shouldUpdate","mutation","type","attributeName","node","addedNodes","nodeType","Node","ELEMENT_NODE","matches","observe","attributes","attributeFilter","childList","subtree","isReversed","getAttribute","disconnect","processItems","items","item","removeAttribute","nestedItems","querySelectorAll","length","Array","from","nestedLists","processLists","lists","list","offsetHeight","error","e","target","parentElement","expanded","_closeOtherItems","exceptItem","closest","forEach","_getOpenItems","firstItem","querySelector","customElements","get","define","CollapsibleList","super","_icon","_label","_reverse","_render","className","iconSlot","name","labelSlot","_container","_iconSlot","_labelSlot","classList","add","innerHTML","codePointAt","charSpan","img","src","alt","labelText","trim","firstChild","icon","value","label","reverse","attributeChangedCallback","oldValue","newValue","IconLabel","HTMLLIElement","_isExpanded","_handleClick","_header","_content","_initialRender","_removeShift","rendered","_addEventListeners","_updateContentVisibility","remove","disconnectedCallback","_removeEventListeners","removeEventListener","event","preventDefault","stopPropagation","isExpanding","dispatchEvent","CustomEvent","detail","bubbles","composed","_createHeader","header","contentWrapper","display","alignItems","flex","hideIcon","iconEl","marginRight","labelEl","_isRendering","existingContent","children","child","push","removeChild","key","_toggleExpanded","_createContent","content","headerElements","headerElementSet","Set","childNodes","filter","has","TEXT_NODE","includes","cloneNode","newIconEl","firstElementChild","insertBefore","wasExpanded","elementName","window","_elements","CollapsibleItem","extends","additionalComponents","selectionMenuModule","Promise","resolve","then","SelectionMenu$1","SelectionMenu","default","productLayoutModule","ProductLayout$1","ProductLayout","wrappers","Object","entries","webComponents","componentName","webComponent","ReactComponent","forwardRef","props","ref","elementRef","useRef","eventHandlers","tagName","is","replace","toLowerCase","elementProps","eventListeners","useMemo","startsWith","eventName","substring","useEffect","element","current","currentHandlers","handler","wrappedHandler","syntheticEvent","nativeEvent","currentTarget","previousHandlers","processedProps","result","keys","React","displayName","createReactWrapper","ImageCollection","restComponents","_items","_selectedId","_boundOnItemClick","_onItemClick","CollapsibleItem$2","JSON","parse","_updateSelectedState","stringify","selected","_renderItems","level","listContainer","listStyle","padding","margin","hasChildren","isSelected","id","li","isExpanded","_hasSelectedDescendant","transition","contentSlot","span","outerHTML","leafNode","itemId","itemElement","arrowIcon","allCollapsibleItems","allLeafItems","leaf","selectedCollapsibleItem","selectedLeafItem","some","_findItemById","found","_images","_handleToggle","_currentOpenIndex","images","isArray","render","_isHandlingToggle","index","composedPath","find","allItems","indexOf","i","source","_onItemToggle","targetItem","previousItem","toggle","map","image","title","removeshift","join","defaultImages","description","_title","_isConnected","_hasRendered","_updateTitle","parsed","_updateImages","_a","imageCollection","imageCollectionContainer","getElementById"],"mappings":"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"}