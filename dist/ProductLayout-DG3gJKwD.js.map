{"version":3,"file":"ProductLayout-DG3gJKwD.js","sources":["../src/components/organisms/image-collection/ImageCollection.js","../src/components/templates/product-layout/ProductLayout.js"],"sourcesContent":["/**\n * ImageCollection Component\n * A custom element that displays a collection of images in a collapsible list\n */\n\nexport class ImageCollection extends HTMLElement {\n  static get observedAttributes() {\n    return ['images', 'no-animation'];\n  }\n  \n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._images = [];\n    this._hasRendered = false;\n    this._handleItemClick = this._handleItemClick.bind(this);\n    this._handleKeyDown = this._handleKeyDown.bind(this);\n    this._handleToggle = this._handleToggle.bind(this);\n    this._currentOpenItem = null;\n    this._initialized = false;\n    this._lastOpenedIndex = -1;\n    this._mutationObserver = null;\n    this._intersectionObserver = null;\n    this._preloadedImages = new Map(); // Cache for preloaded images\n    this._visibleIndices = new Set(); // Track visible items\n    this._preloadDistance = 2; // Number of items to preload around visible ones\n    this._isInitialLoad = true; // Track if this is the first load\n  }\n  \n  get images() {\n    return this._images;\n  }\n  \n  set images(value) {\n    if (Array.isArray(value)) {\n      this._images = value;\n      this._preloadImages(); // Preload when images are set\n      this._render();\n    } else if (typeof value === 'string') {\n      try {\n        this._images = JSON.parse(value);\n        this._preloadImages(); // Preload when images are set via string\n        this._render();\n      } catch (e) {\n        console.error('Invalid images data format', e);\n      }\n    }\n  }\n  \n  connectedCallback() {\n    if (!this._initialized) {\n      this._initialized = true;\n      let isInitialRender = true;\n      this._render();\n      \n      // After the first render, set up the initial load state\n      if (isInitialRender) {\n        this._isInitialLoad = true;\n        // Set initial height for all containers\n        const containers = this.shadowRoot.querySelectorAll('.image-container');\n        containers.forEach(container => {\n          container.style.height = '300px';\n        });\n        \n        // Add initial load class for first render if not using no-animation\n        if (!this.hasAttribute('no-animation')) {\n          this.classList.add('initial-load');\n        } else {\n          // If no-animation is set, ensure images are immediately visible\n          const images = this.shadowRoot.querySelectorAll('.image-collection__image');\n          images.forEach(img => img.classList.add('loaded'));\n        }\n      }\n      \n      // Add event listeners after initial render\n      this._addEventListeners();\n      \n      // Set up mutation observer\n      this._setupMutationObserver();\n      \n      // Preload all images immediately\n      this.preloadAllImages();\n      \n      // Set the first item as expanded by default if none is expanded\n      if (!this._hasExpandedItem()) {\n        this._setFirstItemExpanded();\n      }\n    }\n  }\n  \n  _addEventListeners() {\n    // Handle toggle events from collapsible items\n    this.addEventListener('toggle', (e) => {\n      // Only handle events from direct children\n      const item = e.target;\n      if (item.parentElement !== this.shadowRoot.querySelector('collapsible-list')) {\n        return;\n      }\n      \n      // If an item is being expanded, close all others\n      if (e.detail.expanded) {\n        this._closeOtherItems(item);\n        \n        // Dispatch a custom event\n        const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n        this.dispatchEvent(new CustomEvent('item-selected', {\n          detail: { \n            index: items.indexOf(item),\n            item: item\n          },\n          bubbles: true,\n          composed: true\n        }));\n      }\n    });\n    \n    // Handle keyboard navigation\n    this.addEventListener('keydown', (e) => {\n      const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n      const currentIndex = items.findIndex(item => item === document.activeElement.closest('collapsible-item'));\n      \n      if (currentIndex === -1) return;\n      \n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          const nextIndex = (currentIndex + 1) % items.length;\n          items[nextIndex].focus();\n          break;\n          \n        case 'ArrowUp':\n          e.preventDefault();\n          const prevIndex = (currentIndex - 1 + items.length) % items.length;\n          items[prevIndex].focus();\n          break;\n          \n        case 'Home':\n          e.preventDefault();\n          items[0].focus();\n          break;\n          \n        case 'End':\n          e.preventDefault();\n          items[items.length - 1].focus();\n          break;\n          \n        case 'Enter':\n        case ' ':\n          e.preventDefault();\n          // Only expand if not already expanded (prevents closing)\n          if (!items[currentIndex].expanded) {\n            items[currentIndex].click();\n          }\n          break;\n      }\n    });\n  }\n  \n  _closeOtherItems(selectedItem) {\n    if (!this.shadowRoot) return;\n    const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n    const selectedIndex = items.indexOf(selectedItem);\n    \n    // Update our internal state\n    this._lastOpenedIndex = selectedIndex;\n    this._currentOpenItem = selectedItem;\n    \n    // Close all other items\n    items.forEach(item => {\n      if (item !== selectedItem) {\n        item.expanded = false;\n      }\n    });\n    \n    // Ensure the selected item is expanded\n    if (selectedItem) {\n      selectedItem.expanded = true;\n      this.dispatchEvent(new CustomEvent('item-selected', {\n        detail: { index: selectedIndex, item: selectedItem },\n        bubbles: true,\n        composed: true\n      }));\n    }\n  }\n  \n  _hasExpandedItem() {\n    if (!this.shadowRoot) return false;\n    const items = this.shadowRoot.querySelectorAll('collapsible-item');\n    return Array.from(items).some(item => item && item.expanded);\n  }\n  \n  _setFirstItemExpanded() {\n    // Use requestAnimationFrame to ensure the shadow DOM is ready\n    requestAnimationFrame(() => {\n      const items = this.shadowRoot?.querySelectorAll('collapsible-item');\n      if (items && items.length > 0) {\n        // Only set first item as expanded if no item is currently open\n        if (this._lastOpenedIndex === -1) {\n          items[0].expanded = true;\n          this._currentOpenItem = items[0];\n          this._lastOpenedIndex = 0;\n        }\n      }\n    });\n  }\n  \n  _handleItemClick(e) {\n    // Stop any immediate propagation to prevent other handlers\n    e.stopImmediatePropagation();\n    \n    const targetItem = e.target.closest('collapsible-item');\n    if (!targetItem) return false;\n    \n    // Prevent default to take full control of the toggle behavior\n    e.preventDefault();\n    \n    // If clicking the currently open item, do nothing (keep it open)\n    if (targetItem === this._currentOpenItem) {\n      return false;\n    }\n    \n    // For other items, close all others and open the clicked one\n    this._closeOtherItems(targetItem);\n    \n    // Ensure the target item is expanded\n    targetItem.expanded = true;\n    \n    // Update our internal state\n    const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n    this._currentOpenItem = targetItem;\n    this._lastOpenedIndex = items.indexOf(targetItem);\n    \n    // Dispatch item-selected event\n    this.dispatchEvent(new CustomEvent('item-selected', {\n      detail: { \n        index: this._lastOpenedIndex,\n        item: targetItem \n      },\n      bubbles: true,\n      composed: true\n    }));\n    \n    return false;\n  }\n  \n  /**\n   * Sets up intersection observer for lazy loading\n   * @private\n   */\n  _setupIntersectionObserver() {\n    // Not needed anymore since we're preloading all images\n    // But kept for backward compatibility\n    if (this._intersectionObserver) {\n      this._intersectionObserver.disconnect();\n      this._intersectionObserver = null;\n    }\n  }\n  \n  _observeItems() {\n    // Not needed anymore since we're preloading all images\n    // But kept for backward compatibility\n  }\n  \n  disconnectedCallback() {\n    // Clean up event listeners\n    const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n    items.forEach(item => {\n      item.removeEventListener('click', this._handleItemClick);\n      item.removeEventListener('toggle', this._handleToggle);\n    });\n    \n    // Disconnect observers\n    if (this._mutationObserver) {\n      this._mutationObserver.disconnect();\n      this._mutationObserver = null;\n    }\n    \n    if (this._intersectionObserver) {\n      this._intersectionObserver.disconnect();\n      this._intersectionObserver = null;\n    }\n  }\n  \n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'images' && oldValue !== newValue) {\n      this.images = newValue;\n    }\n  }\n  \n  _setupEventListeners() {\n    const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n    \n    items.forEach((item, index) => {\n      // Remove any existing click handlers to prevent duplicates\n      item.removeEventListener('click', this._handleItemClick);\n      item.removeEventListener('keydown', this._handleKeyDown);\n      item.removeEventListener('toggle', this._handleToggle);\n      \n      // Store a reference to the original click handler\n      if (!item._originalClickHandler) {\n        item._originalClickHandler = item._onClick;\n      }\n      \n      // Override the click handler to prevent closing the open item\n      item._onClick = (e) => {\n        if (item === this._currentOpenItem) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n          return false;\n        }\n        return item._originalClickHandler?.call(item, e);\n      };\n      \n      // Add our custom handlers\n      item.addEventListener('click', this._handleItemClick, { capture: true });\n      item.addEventListener('keydown', this._handleKeyDown, { capture: true });\n      item.addEventListener('toggle', this._handleToggle, { capture: true });\n      \n      // Make items keyboard accessible\n      item.setAttribute('tabindex', '0');\n      item.setAttribute('role', 'button');\n    });\n    \n    this._hasRendered = true;\n  }\n  \n  _setupMutationObserver() {\n    // Set up mutation observer to watch for changes in the DOM\n    this._mutationObserver = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.type === 'childList') {\n          // If items were added or removed, update event listeners\n          this._setupEventListeners();\n        }\n      });\n    });\n    \n    // Start observing the shadow root for changes\n    this._mutationObserver.observe(this.shadowRoot, {\n      childList: true,\n      subtree: true\n    });\n  }\n  \n  _handleToggle(e) {\n    // We don't need to handle the toggle event directly anymore\n    // as we're handling everything in _handleItemClick\n    e.stopPropagation();\n    \n    // Prevent the default toggle behavior since we're handling it in _handleItemClick\n    e.preventDefault();\n    return false;\n  }\n  \n  _handleKeyDown(e) {\n    // Handle keyboard navigation (Enter or Space to toggle)\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      this._handleItemClick(e);\n    }\n    // Handle arrow keys for navigation\n    else if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n      e.preventDefault();\n      const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n      const currentIndex = items.indexOf(e.target);\n      let nextIndex;\n      \n      if (e.key === 'ArrowDown') {\n        nextIndex = (currentIndex + 1) % items.length;\n      } else {\n        nextIndex = (currentIndex - 1 + items.length) % items.length;\n      }\n      \n      const nextItem = items[nextIndex];\n      if (nextItem) {\n        nextItem.focus();\n        nextItem.click();\n      }\n    }\n  }\n  \n  // Public method to get the index of the currently open item\n  getOpenItemIndex() {\n    return this._lastOpenedIndex;\n  }\n\n  // Public method to open a specific item by index\n  _closeOtherItems(selectedItem) {\n    if (!this.shadowRoot) return;\n    \n    const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n    const selectedIndex = items.indexOf(selectedItem);\n    \n    // If clicking the currently open item, do nothing\n    if (selectedItem === this._currentOpenItem) {\n      // Force the item to stay open\n      if (!selectedItem.expanded) {\n        selectedItem.expanded = true;\n      }\n      return;\n    }\n    \n    // Close all items except the selected one\n    items.forEach((item, index) => {\n      if (index !== selectedIndex) {\n        item.expanded = false;\n      } else {\n        // Ensure the selected item is expanded\n        item.expanded = true;\n        this._currentOpenItem = item;\n        this._lastOpenedIndex = selectedIndex;\n      }\n    });\n    \n    // Dispatch item-selected event\n    this.dispatchEvent(new CustomEvent('item-selected', {\n      detail: { index: selectedIndex, item: selectedItem },\n      bubbles: true,\n      composed: true\n    }));\n  }\n  \n  /**\n   * Forces preloading of all images\n   * @public\n   */\n  preloadAllImages() {\n    if (!this._images || !Array.isArray(this._images)) return;\n    \n    console.log('Preloading all images:', this._images.length);\n    \n    // Load all images in sequence with a small delay to prevent UI blocking\n    this._images.forEach((img, index) => {\n      if (img && img.src) {\n        // Small delay to prevent UI blocking\n        setTimeout(() => {\n          if (!this._preloadedImages.has(img.src) || \n              this._preloadedImages.get(img.src).status === 'error') {\n            this._loadImage(img, index, false);\n          }\n        }, index * 50); // 50ms delay between each image load\n      }\n    });\n  }\n  \n  /**\n   * Gets the preload status of an image\n   * @param {number} index - Index of the image\n   * @returns {string} - Status of the image ('loading', 'loaded', 'error', or undefined if not found)\n   * @public\n   */\n  getImageStatus(index) {\n    if (!this._images || !this._images[index] || !this._images[index].src) {\n      return undefined;\n    }\n    const status = this._preloadedImages.get(this._images[index].src);\n    return status ? status.status : undefined;\n  }\n  \n  // Public method to open a specific item by index\n  openItem(index) {\n    if (!this.shadowRoot) return;\n    \n    const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n    if (index >= 0 && index < items.length) {\n      // If clicking the currently open item, do nothing\n      if (items[index] === this._currentOpenItem) {\n        return;\n      }\n      \n      // Close all items first\n      items.forEach(item => {\n        item.expanded = false;\n      });\n      \n      // Open the selected item\n      items[index].expanded = true;\n      this._currentOpenItem = items[index];\n      this._lastOpenedIndex = index;\n      \n      // Dispatch event\n      this.dispatchEvent(new CustomEvent('item-selected', {\n        detail: { \n          index: index,\n          item: items[index]\n        },\n        bubbles: true,\n        composed: true\n      }));\n    }\n  }\n\n  /**\n   * Preloads all images in the collection\n   * @param {number} [priorityIndex] - Optional index to load first\n   */\n  _preloadImages(priorityIndex = null) {\n    if (!this._images || !Array.isArray(this._images)) return;\n    \n    // If we have a priority index, load it first\n    if (priorityIndex !== null && this._images[priorityIndex]) {\n      this._loadImage(this._images[priorityIndex], priorityIndex, true);\n    }\n    \n    // Then load all other images\n    this._images.forEach((img, index) => {\n      // Skip the priority index if it was already loaded\n      if (priorityIndex !== null && index === priorityIndex) return;\n      \n      // Only load if not already loaded or loading\n      const imgSrc = img.src;\n      if (!this._preloadedImages.has(imgSrc) || this._preloadedImages.get(imgSrc).status === 'error') {\n        this._loadImage(img, index, false);\n      }\n    });\n  }\n\n  /**\n   * Loads a single image\n   * @private\n   */\n  _loadImage(imageData, index, isPriority = false) {\n    if (!imageData || !imageData.src) {\n      console.warn('No image data or src provided');\n      return;\n    }\n    \n    let imgSrc = imageData.src;\n    \n    // Ensure absolute URL for local files\n    if (!imgSrc.startsWith('http') && !imgSrc.startsWith('data:') && !imgSrc.startsWith('/')) {\n      imgSrc = `/${imgSrc}`;\n    }\n    \n    console.log(`Attempting to load image [${index}]: ${imgSrc}`, { isPriority });\n    \n    // Skip if already loaded or loading, unless it's a priority load\n    if (this._preloadedImages.has(imgSrc)) {\n      const status = this._preloadedImages.get(imgSrc).status;\n      if ((status === 'loaded' || status === 'loading') && !isPriority) {\n        console.log(`Image already ${status}: ${imgSrc}`);\n        return;\n      }\n    }\n    \n    // Mark as loading\n    this._preloadedImages.set(imgSrc, { status: 'loading' });\n    \n    // Create a transparent 1x1 pixel data URL as initial src to prevent broken image icon\n    const transparentPixel = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n    this._updateImageInDOM(imgSrc, transparentPixel, false);\n    \n    const img = new Image();\n    \n    // Set up loading state\n    img.onload = () => {\n      console.log(`Image loaded successfully: ${imgSrc}`);\n      this._preloadedImages.set(imgSrc, { \n        status: 'loaded',\n        element: img,\n        width: img.width,\n        height: img.height\n      });\n      \n      // Update the image in the DOM with the actual image\n      this._updateImageInDOM(imgSrc, imgSrc);\n    };\n    \n    img.onerror = (e) => {\n      console.error(`Error loading image: ${imgSrc}`, e);\n      this._preloadedImages.set(imgSrc, { \n        status: 'error',\n        error: e \n      });\n      \n      // Show error state in the DOM without showing broken image icon\n      this._updateImageInDOM(imgSrc, transparentPixel, true);\n    };\n    \n    // Start loading the actual image\n    img.src = imgSrc;\n  }\n  \n  /**\n   * Updates an image in the DOM when it's loaded\n   * @private\n   */\n  _updateImageInDOM(src, newSrc, isError = false) {\n    if (!this.shadowRoot) {\n      console.warn('No shadow root available');\n      return;\n    }\n    \n    console.log(`Updating image in DOM: ${src}`, { newSrc, isError });\n    \n    // First, try to find by exact data-index match if we have it\n    let images = [];\n    const allImages = Array.from(this.shadowRoot.querySelectorAll('img[data-src]'));\n    \n    // Try exact match first\n    images = allImages.filter(img => {\n      const dataSrc = img.getAttribute('data-src');\n      return dataSrc && (dataSrc === src || dataSrc.endsWith(`/${src}`) || dataSrc.endsWith(src));\n    });\n    \n    // If not found, try with just the filename\n    if (images.length === 0) {\n      const filename = src.split('/').pop();\n      images = allImages.filter(img => {\n        const dataSrc = img.getAttribute('data-src');\n        return dataSrc && dataSrc.endsWith(filename);\n      });\n      console.log(`Trying to find by filename ${filename}, found:`, images.length);\n    }\n    \n    // If still not found, try any image that contains the filename\n    if (images.length === 0) {\n      const filename = src.split('/').pop();\n      images = allImages.filter(img => {\n        const dataSrc = img.getAttribute('data-src');\n        return dataSrc && dataSrc.includes(filename);\n      });\n      console.log(`Trying to find by partial filename ${filename}, found:`, images.length);\n    }\n    \n    // If still not found, try to find by index\n    if (images.length === 0) {\n      const allImagesWithIndex = Array.from(this.shadowRoot.querySelectorAll('img'));\n      const index = this._images.findIndex(img => img && img.src === src);\n      if (index >= 0 && index < allImagesWithIndex.length) {\n        images = [allImagesWithIndex[index]];\n      }\n    }\n    \n    // If no images found, try to find by src attribute directly\n    if (images.length === 0) {\n      images = Array.from(this.shadowRoot.querySelectorAll(`img[src=\"${src}\"]`));\n    }\n    \n    // Get the image info to check if it's an initial load\n    const imageInfo = this._preloadedImages.get(src);\n    const isInitialLoad = this._isInitialLoad && (!imageInfo || imageInfo.isInitialLoad !== false);\n    \n    images.forEach(img => {\n      if (isError) {\n        // Add error class and set a placeholder\n        img.classList.add('image-error');\n        img.alt = 'Failed to load image';\n        img.classList.remove('loading');\n      } else if (newSrc) {\n        console.log(`Updating image source: ${newSrc}`, { isInitialLoad });\n        \n        // Update the image source\n        img.src = newSrc;\n        img.removeAttribute('data-src');\n        \n        // For initial load, use opacity transition\n        if (isInitialLoad) {\n          // Let CSS handle the opacity transition\n          img.classList.add('loaded');\n          \n          // Mark this image as no longer in initial load\n          if (imageInfo) {\n            imageInfo.isInitialLoad = false;\n          }\n        } else {\n          // For subsequent loads, use height animation\n          const container = img.closest('.image-container');\n          if (container) {\n            const startHeight = container.offsetHeight;\n            container.style.height = `${startHeight}px`;\n            container.style.transition = 'height 0.3s ease-in-out';\n            \n            // Force reflow to ensure the transition works\n            void container.offsetHeight;\n            \n            // Set final height\n            container.style.height = 'auto';\n            const endHeight = container.offsetHeight;\n            container.style.height = `${startHeight}px`;\n            \n            // Animate to final height\n            requestAnimationFrame(() => {\n              img.classList.add('loaded');\n              container.style.height = `${endHeight}px`;\n            });\n            \n            // Clean up after animation\n            container.addEventListener('transitionend', function onEnd() {\n              container.style.height = '';\n              container.style.transition = '';\n              container.removeEventListener('transitionend', onEnd);\n            });\n          } else {\n            img.classList.add('loaded');\n          }\n        }\n      }\n      \n      // Remove the loader if it exists\n      const loader = img.nextElementSibling;\n      if (loader && loader.classList.contains('image-loader')) {\n        loader.remove();\n      }\n    });\n  }\n  \n  _render() {\n    if (!this.shadowRoot) return;\n    \n    // Save the current open index before re-rendering\n    const previousOpenIndex = this._lastOpenedIndex;\n    const isInitialRender = !this._hasRendered;\n    const noAnimation = this.hasAttribute('no-animation');\n    \n    // Create the styles\n    const style = `\n      <style>\n        .image-collection {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n          max-width: 100%;\n          margin: 0 auto;\n        }\n        \n        .image-container {\n          position: relative;\n          width: 100%;\n          height: 300px;\n          min-height: 300px;\n          overflow: hidden;\n          contain: content;\n          will-change: height;\n        }\n        \n        .image-collection__image {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n          transition: opacity 0.3s ease-in-out, height 0.3s ease-in-out;\n          opacity: 0;\n        }\n        \n        :host([no-animation]) .image-collection__image {\n          opacity: 1;\n          transition: none;\n        }\n        \n        /* Initial load - use opacity transition */\n        .initial-load .image-container {\n          height: 300px !important;\n          transition: none !important;\n        }\n        \n        .initial-load .image-collection__image {\n          height: 100%;\n          opacity: 0;\n          transition: opacity 0.3s ease-in-out;\n        }\n        \n        .initial-load .image-collection__image.loaded {\n          opacity: 1;\n        }\n        \n        /* Subsequent loads - use height transition */\n        .image-collection__image.loaded {\n          opacity: 1;\n          height: 100%;\n        }\n        \n        .image-collection__image.image-error {\n          opacity: 1;\n          background-color: #f5f5f5;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #999;\n          font-style: italic;\n        }\n        \n        .image-loader {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #999;\n          font-style: italic;\n        }\n        \n        .image-collection__image.loaded + .image-loader {\n          display: none;\n        }\n        \n        .image-collection__title {\n          margin: 0;\n          padding: 0.8rem 1rem;\n          color: #333;\n          font-size: 0.8em;\n          font-weight: 600;\n          background: rgba(0,0,0,0.4);\n          color: white;\n          transition: all 0.2s ease;\n          position: relative;\n          z-index: 1;\n          line-height: 1.2;\n          border: none;\n          display: block;\n          width: 100%;\n          text-align: left;\n          color: white;\n          position: absolute;\n          top: 0;\n        }\n\n        \n        collapsible-item {\n          cursor: pointer;\n          transition: background-color 0.2s;\n          border: none;\n          margin: 0;\n          padding: 0;\n          overflow: hidden;\n          display: block;\n          min-height: 45px;\n          position: relative;\n        }\n        \n        collapsible-item:not(:last-child) .image-collection__title {\n          border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0.3; }\n          to { opacity: 1; }\n        }\n      </style>\n    `;\n    \n    // Create the HTML for each image item\n    const items = this._images.map((image, index) => {\n      // Ensure the image path is correct - prepend public path if it's a relative path\n      let imageSrc = image.src;\n      if (imageSrc && !imageSrc.startsWith('http') && !imageSrc.startsWith('data:')) {\n        // Ensure there's exactly one leading slash\n        imageSrc = imageSrc.startsWith('/') ? imageSrc : `/${imageSrc}`;\n      }\n      \n      // Check if image is already loaded\n      const isLoaded = this._preloadedImages.has(imageSrc) && \n                      this._preloadedImages.get(imageSrc).status === 'loaded';\n      const isLoading = this._preloadedImages.has(imageSrc) && \n                       this._preloadedImages.get(imageSrc).status === 'loading';\n      \n      const imgClasses = ['image-collection__image'];\n      if (isLoaded) {\n        imgClasses.push('loaded');\n      } else if (isLoading) {\n        imgClasses.push('loading');\n      }\n      \n      return `\n        <collapsible-item hide-icon data-index=\"${index}\">\n          <div class=\"image-container\">\n            <img\n              ${isLoaded ? `src=\"${imageSrc}\"` : `src=\"\" data-src=\"${imageSrc}\"`}\n              alt=\"${image.alt || image.title || 'Image'}\"\n              class=\"${imgClasses.join(' ')}\"\n              loading=\"lazy\"\n              onerror=\"this.onerror=null;this.classList.add('image-error');\"\n            />\n            ${!isLoaded ? '<div class=\"image-loader\">Loading...</div>' : ''}\n          </div>\n          <div slot=\"header\" class=\"image-collection__title\">${image.title || `Image ${index + 1}`}</div>\n          ${image.description ? `<div slot=\"content\">${image.description}</div>` : ''}\n        </collapsible-item>\n      `;\n    }).join('');\n    \n    // Combine everything into the final template\n    const template = `\n      ${style}\n      <div class=\"image-collection\">\n        <collapsible-list>\n          ${items}\n        </collapsible-list>\n      </div>\n    `;\n    \n    // Set the inner HTML\n    this.shadowRoot.innerHTML = template;\n    \n    // Set initial height for all containers on initial render\n    if (isInitialRender) {\n      const containers = this.shadowRoot.querySelectorAll('.image-container');\n      containers.forEach(container => {\n        container.style.height = '300px';\n      });\n    }\n    \n    // Set up intersection observer for lazy loading\n    if (!this._intersectionObserver) {\n      this._setupIntersectionObserver();\n    }\n    \n    // Setup event listeners\n    this._setupEventListeners();\n    \n    // Restore the previously open item if it exists\n    if (previousOpenIndex >= 0) {\n      this.openItem(previousOpenIndex);\n    } else if (this._images.length > 0) {\n      // Otherwise, open the first item by default\n      this.openItem(0);\n    }\n    \n    // Start loading visible images\n    this._preloadImages();\n    \n    // Mark as rendered\n    this._hasRendered = true;\n    \n    // Load components and setup event listeners\n    return Promise.all([\n      customElements.get('collapsible-list') || \n        import('../../molecules/collapsible-list/CollapsibleList.js'),\n      customElements.get('collapsible-item') || \n        import('../../atoms/collapsible-item/CollapsibleItem.js')\n    ]).then(() => {\n      this._setupEventListeners();\n      \n      // After components are loaded and event listeners are set up\n      const items = Array.from(this.shadowRoot.querySelectorAll('collapsible-item'));\n      \n      if (items.length > 0) {\n        // If we had an item open before, try to restore its state\n        if (previousOpenIndex !== -1 && previousOpenIndex < items.length) {\n          items[previousOpenIndex].expanded = true;\n          this._currentOpenItem = items[previousOpenIndex];\n          this._lastOpenedIndex = previousOpenIndex;\n        } \n        // If this is the first render and we have images, open the first one\n        else if (isInitialRender && this._images.length > 0 && previousOpenIndex === -1) {\n          this._lastOpenedIndex = 0;\n          \n          // If no-animation is set, immediately update the DOM without transitions\n          if (noAnimation) {\n            const items = this.shadowRoot.querySelectorAll('collapsible-item');\n            if (items.length > 0) {\n              items[0].expanded = true;\n              this._currentOpenItem = items[0];\n            }\n          }\n        }\n      }\n      \n      this._hasRendered = true;\n    });\n  }\n}\n\n// Define the custom element\nif (!customElements.get('image-collection')) {\n  customElements.define('image-collection', ImageCollection);\n}\n","/**\n * ProductLayout\n * A layout component that displays an image collection, title, and content\n */\n// Import the image-collection component\nimport '../../organisms/image-collection/ImageCollection';\n\nexport class ProductLayout extends HTMLElement {\n  static get observedAttributes() {\n    return ['title', 'images'];\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._title = '';\n    this._images = [];\n    this._isConnected = false;\n    this._hasRendered = false;\n    this._isUpdating = false; // Flag to prevent re-entrant calls\n    this._elements = null;\n    this._render = this._render.bind(this);\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  set title(value) {\n    const newValue = value || '';\n    if (this._title !== newValue) {\n      this._title = newValue;\n      if (this._isConnected) {\n        this._updateTitle();\n      }\n    }\n  }\n\n  get images() {\n    return this._images;\n  }\n\n  set images(value) {\n    let newImages = [];\n    \n    if (typeof value === 'string') {\n      try {\n        newImages = value ? JSON.parse(value) : [];\n      } catch (e) {\n        console.error('Invalid images data format', e);\n        newImages = [];\n      }\n    } else if (Array.isArray(value)) {\n      newImages = [...value];\n    }\n    \n    // Only update if the images have actually changed\n    const imagesChanged = JSON.stringify(this._images) !== JSON.stringify(newImages);\n    this._images = newImages;\n    \n    if (imagesChanged && this._isConnected) {\n      this._updateImages();\n    }\n  }\n\n  connectedCallback() {\n    if (this._isConnected) return;\n    this._isConnected = true;\n    \n    // Initialize from attributes\n    if (this.hasAttribute('title')) {\n      this._title = this.getAttribute('title');\n    }\n    \n    if (this.hasAttribute('images')) {\n      try {\n        this._images = JSON.parse(this.getAttribute('images') || '[]');\n      } catch (e) {\n        console.error('Invalid initial images data', e);\n        this._images = [];\n      }\n    }\n    \n    this._render();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n    \n    switch (name) {\n      case 'title':\n        this.title = newValue;\n        break;\n      case 'images':\n        this.images = newValue;\n        break;\n    }\n  }\n\n  _renderImageCollection() {\n    if (!this._images || this._images.length === 0) return '';\n    \n    // Ensure images is an array\n    const images = Array.isArray(this._images) ? this._images : [];\n    \n    // Create an image-collection element with the images and no-animation attribute\n    return `\n      <div>\n        <image-collection \n          images='${JSON.stringify(images)}'\n          style=\"--image-height: 400px;\"\n          no-animation\n        ></image-collection>\n      </div>\n    `;\n  }\n\n  // Cache DOM elements after first render\n  _cacheElements() {\n    if (!this.shadowRoot) return;\n    \n    this._elements = {\n      title: this.shadowRoot.querySelector('.header h2'),\n      imageContainer: this.shadowRoot.querySelector('.image-collection-container'),\n      header: this.shadowRoot.querySelector('.header'),\n      content: this.shadowRoot.querySelector('.content')\n    };\n  }\n\n  _updateTitle() {\n    if (!this.shadowRoot) return;\n    \n    if (this._elements?.title) {\n      this._elements.title.textContent = this._title;\n    } else if (this._isConnected) {\n      this._render();\n    }\n  }\n\n  _updateImages() {\n    if (this._isUpdating || !this.shadowRoot || !this._isConnected) return;\n    \n    this._isUpdating = true;\n    try {\n      const imageCollection = this.shadowRoot.querySelector('image-collection');\n      if (imageCollection) {\n        // Update existing image collection\n        const currentImages = imageCollection.getAttribute('images');\n        const newImages = JSON.stringify(this._images);\n        if (currentImages !== newImages) {\n          imageCollection.setAttribute('images', newImages);\n        }\n      } else if (this._elements?.imageContainer) {\n        // Re-render just the image container if it exists\n        this._elements.imageContainer.innerHTML = this._renderImageCollection();\n      } else if (!this._hasRendered) {\n        // Only do full render if we haven't rendered yet\n        this._render();\n      }\n    } finally {\n      this._isUpdating = false;\n    }\n  }\n\n  _render() {\n    if (this._isUpdating || !this.shadowRoot || !this._isConnected) return;\n    \n    this._isUpdating = true;\n    try {\n      // Only set innerHTML on first render\n      if (!this._hasRendered) {\n      this.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n          --primary-color: #00f0ff;\n          --text-color: #e0e0e0;\n          --text-secondary: #8f9bb3;\n          --border-color: #2a2a3a;\n          --bg-color: #1a1a2e;\n        }\n        \n        \n        .image-collection-container {\n          width: 100%;\n          position: relative;\n          border-radius: 8px;\n          background-color: #1a1a1a;\n          margin-bottom: 0;\n          overflow: hidden;\n        }\n        \n        .header {\n          padding: 1rem 0;\n        }\n        \n        .header h2 {\n          margin: 0;\n          color: var(--text-color);\n          font-size: 1.5rem;\n          font-weight: 600;\n        }\n        \n        .divider {\n          border: none;\n          height: 1px;\n          background-color: white;\n          margin: 0;\n        }\n        \n        .content {\n          padding: 0;\n          color: var(--text-secondary);\n          line-height: 1.6;\n        }\n        \n        ::slotted(.vehicle-description) {\n          color: var(--text-secondary);\n          line-height: 1.7;\n        }\n        \n        ::slotted(.vehicle-specs) {\n          margin-top: 1.5rem;\n          background: rgba(0, 0, 0, 0.2);\n          border-radius: 8px;\n          padding: 1.5rem;\n          border: 1px solid var(--border-color);\n        }\n        \n        ::slotted(.vehicle-specs h3) {\n          color: var(--primary-color);\n          margin-top: 0;\n          margin-bottom: 1.25rem;\n          font-size: 1.25rem;\n          font-weight: 600;\n          border-bottom: 1px solid var(--border-color);\n          padding-bottom: 0.75rem;\n        }\n        \n        ::slotted(.vehicle-specs ul) {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n          gap: 0.75rem;\n        }\n        \n        ::slotted(.vehicle-specs li) {\n          padding: 0.75rem 1rem;\n          background: rgba(0, 0, 0, 0.2);\n          border-radius: 6px;\n          border-left: 3px solid var(--primary-color);\n          transition: var(--transition, all 0.3s ease);\n        }\n        \n        ::slotted(.vehicle-specs li:hover) {\n          background: rgba(0, 240, 255, 0.1);\n          transform: translateX(4px);\n        }\n        \n        ::slotted(.vehicle-specs strong) {\n          color: var(--primary-color);\n          margin-right: 0.5rem;\n          font-weight: 500;\n        }\n      </style>\n      <div class=\"product-layout\">\n        ${this._images.length > 0 ? `\n          <div class=\"image-collection-container\">\n            ${this._renderImageCollection()}\n          </div>\n        ` : ''}\n        \n        <div class=\"header\">\n          <div class=\"divider\"></div>\n          <h2>${this._title}</h2>\n        </div>\n        \n        <div class=\"content\">\n          <slot name=\"content\"></slot>\n        </div>\n      </div>`;\n      \n        this._hasRendered = true;\n        this._cacheElements();\n      } else if (!this._isUpdating) {\n        // On subsequent renders, only update what's needed\n        this._updateTitle();\n        this._updateImages();\n      }\n    } finally {\n      this._isUpdating = false;\n    }\n  }\n}\n\n// Auto-register the component when loaded directly\nif (typeof window !== 'undefined' && !customElements.get('product-layout')) {\n  customElements.define('product-layout', ProductLayout);\n}\n"],"names":["items"],"mappings":"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"}